---
title: 视频平台M3U8抓取
author: JACK小桔子
categories: 浏览器
date: 2020-08-26 12:34:30
top: false
tags: 
 - 视频
keywords: 视频
summary: 想要下载各大视频平台的视频？可以使用这个方法抓取M3U8，再使用M3U8下载器下载
img: /images/blog-cover/blog20.png
---
想要下载各大视频平台的视频？可以使用这个方法抓取M3U8，再使用M3U8下载器下载

### 使用方法
1. 收藏代码，这里以爱奇艺和腾讯为例
    1. 将超链接拖拽至收藏夹
    ![img1](/images/blog/blog20/img1.gif "© JACK小桔子")
    2. 复制代码，手动添加
    ![img2](/images/blog/blog20/img2.gif "© JACK小桔子")
2. 在视频页面点击代码
![img3](/images/blog/blog20/img3.gif "© JACK小桔子")

### 爱奇艺视频
超链接：<a href="javascript:try{var info=playerObject._player._core._movieinfo.originalData.data.program.video;info.forEach(function(item,index){if(item._selected){var m3u8Content=&quot;&quot;;if(item.m3u8==undefined){try{if(typeof(eval(cmd5x))==&quot;function&quot;){}}catch(e){var req1=new XMLHttpRequest();req1.open(&quot;GET&quot;,&quot;https://static.iqiyi.com/js/common/f6a3054843de4645b34d205a9f377d25.js&quot;,false);req1.onload=function(){var script=document.createElement(&quot;script&quot;);script.text=req1.responseText;document.getElementsByTagName(&quot;head&quot;)[0].appendChild(script)};req1.send(null)}var fs=item.fs;var content=&quot;#EXTM3U\n&quot;;fs.forEach(function(fs_i,fs_index){var url=fs_i.l;var prefix=&quot;https://data.video.iqiyi.com/videos&quot;;var api=prefix+url;try{var t=playerObject._player._core._movieinfo.originalData.data.boss.data.t;api=prefix+url+&quot;&cross-domain=1&t=&quot;+t+&quot;&QY00001=&quot;+/qd_uid=(\d+)/g.exec(url)[1]+&quot;&ib=4&ptime=0&ibt=&quot;+cmd5x(t+/\/(\w{10,})/g.exec(url)[1])}catch(err){}var req=new XMLHttpRequest();req.overrideMimeType(&quot;application/json&quot;);req.open(&quot;GET&quot;,api,false);req.onload=function(){var jsonResponse=JSON.parse(req.responseText);content+=&quot;#EXTINF:0\n&quot;+jsonResponse[&quot;l&quot;]+&quot;\n&quot;};req.send(null)});content+=&quot;#EXT-X-ENDLIST&quot;;m3u8Content=content}else{m3u8Content=item.m3u8}var blob=new Blob([m3u8Content],{type:&quot;text/plain&quot;});var url=URL.createObjectURL(blob);var title=(document.title.indexOf(&quot;-&quot;)!=-1?document.title.substring(0,document.title.indexOf(&quot;-&quot;)):document.title.replace(/\s/,&quot;&quot;))+&quot;_&quot;+item.scrsz+&quot;_&quot;+(item.code==2?&quot;H264&quot;:&quot;H265&quot;)+&quot;_&quot;+document.getElementsByClassName(&quot;iqp-time-dur&quot;)[0].innerText.replace(/:/,&quot;.&quot;)+&quot;_&quot;+(item.vsize/1024/1024).toFixed(2)+&quot;MB.m3u8&quot;;var aLink=document.createElement(&quot;a&quot;);aLink.href=url;aLink.download=title;aLink.style.display=&quot;none&quot;;var event;if(window.MouseEvent){event=new MouseEvent(&quot;click&quot;)}else{event=document.createEvent(&quot;MouseEvents&quot;);event.initMouseEvent(&quot;click&quot;,true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)}})}catch(err){var info1=playerObject._player.package.engine.adproxy.engine.movieinfo.vidl;info1.forEach(function(item1,index1){if(item1.responseData!=undefined){var info=item1.responseData.data.program.video;info.forEach(function(item,index){if(item._selected){var m3u8Content=&quot;&quot;;if(item.m3u8==undefined){try{if(typeof(eval(cmd5x))==&quot;function&quot;){}}catch(e){var req1=new XMLHttpRequest();req1.open(&quot;GET&quot;,&quot;https://static.iqiyi.com/js/common/f6a3054843de4645b34d205a9f377d25.js&quot;,false);req1.onload=function(){var script=document.createElement(&quot;script&quot;);script.text=req1.responseText;document.getElementsByTagName(&quot;head&quot;)[0].appendChild(script)};req1.send(null)}var fs=item.fs;var content=&quot;#EXTM3U\n&quot;;fs.forEach(function(fs_i,fs_index){var url=fs_i.l;var prefix=&quot;https://data.video.iqiyi.com/videos&quot;;var api=prefix+url;try{var t=playerObject._player.package.engine.adproxy.engine.movieinfo.current.boss.data.t;api=prefix+url+&quot;&cross-domain=1&t=&quot;+t+&quot;&QY00001=&quot;+/qd_uid=(\d+)/g.exec(url)[1]+&quot;&ib=4&ptime=0&ibt=&quot;+cmd5x(t+/\/(\w{10,})/g.exec(url)[1])}catch(err){console.error(err)}var req=new XMLHttpRequest();req.overrideMimeType(&quot;application/json&quot;);req.open(&quot;GET&quot;,api,false);req.onload=function(){var jsonResponse=JSON.parse(req.responseText);content+=&quot;#EXTINF:0\n&quot;+jsonResponse[&quot;l&quot;]+&quot;\n&quot;};req.send(null)});content+=&quot;#EXT-X-ENDLIST&quot;;m3u8Content=content}else{m3u8Content=item.m3u8}var blob=new Blob([m3u8Content],{type:&quot;text/plain&quot;});var url=URL.createObjectURL(blob);var title=(document.title.indexOf(&quot;-&quot;)!=-1?document.title.substring(0,document.title.indexOf(&quot;-&quot;)):document.title.replace(/\s/,&quot;&quot;))+&quot;_&quot;+item.scrsz+&quot;_&quot;+(item.code==2?&quot;H264&quot;:&quot;H265&quot;)+&quot;_&quot;+document.getElementsByClassName(&quot;iqp-time-dur&quot;)[0].innerText.replace(/:/,&quot;.&quot;)+&quot;_&quot;+(item.vsize/1024/1024).toFixed(2)+&quot;MB.m3u8&quot;;/*nilaoda*/var aLink=document.createElement(&quot;a&quot;);aLink.href=url;aLink.download=title;aLink.style.display=&quot;none&quot;;var event;if(window.MouseEvent){event=new MouseEvent(&quot;click&quot;)}else{event=document.createEvent(&quot;MouseEvents&quot;);event.initMouseEvent(&quot;click&quot;,true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)}})}})}">爱奇艺视频</a>


```javascript
javascript:try{var info=playerObject._player._core._movieinfo.originalData.data.program.video;info.forEach(function(item,index){if(item._selected){var m3u8Content="";if(item.m3u8==undefined){try{if(typeof(eval(cmd5x))=="function"){}}catch(e){var req1=new XMLHttpRequest();req1.open("GET","https://static.iqiyi.com/js/common/f6a3054843de4645b34d205a9f377d25.js",false);req1.onload=function(){var script=document.createElement("script");script.text=req1.responseText;document.getElementsByTagName("head")[0].appendChild(script)};req1.send(null)}var fs=item.fs;var content="#EXTM3U\n";fs.forEach(function(fs_i,fs_index){var url=fs_i.l;var prefix="https://data.video.iqiyi.com/videos";var api=prefix+url;try{var t=playerObject._player._core._movieinfo.originalData.data.boss.data.t;api=prefix+url+"&cross-domain=1&t="+t+"&QY00001="+/qd_uid=(\d+)/g.exec(url)[1]+"&ib=4&ptime=0&ibt="+cmd5x(t+/\/(\w{10,})/g.exec(url)[1])}catch(err){}var req=new XMLHttpRequest();req.overrideMimeType("application/json");req.open("GET",api,false);req.onload=function(){var jsonResponse=JSON.parse(req.responseText);content+="#EXTINF:0\n"+jsonResponse["l"]+"\n"};req.send(null)});content+="#EXT-X-ENDLIST";m3u8Content=content}else{m3u8Content=item.m3u8}var blob=new Blob([m3u8Content],{type:"text/plain"});var url=URL.createObjectURL(blob);var title=(document.title.indexOf("-")!=-1?document.title.substring(0,document.title.indexOf("-")):document.title.replace(/\s/,""))+"_"+item.scrsz+"_"+(item.code==2?"H264":"H265")+"_"+document.getElementsByClassName("iqp-time-dur")[0].innerText.replace(/:/,".")+"_"+(item.vsize/1024/1024).toFixed(2)+"MB.m3u8";var aLink=document.createElement("a");aLink.href=url;aLink.download=title;aLink.style.display="none";var event;if(window.MouseEvent){event=new MouseEvent("click")}else{event=document.createEvent("MouseEvents");event.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)}})}catch(err){var info1=playerObject._player.package.engine.adproxy.engine.movieinfo.vidl;info1.forEach(function(item1,index1){if(item1.responseData!=undefined){var info=item1.responseData.data.program.video;info.forEach(function(item,index){if(item._selected){var m3u8Content="";if(item.m3u8==undefined){try{if(typeof(eval(cmd5x))=="function"){}}catch(e){var req1=new XMLHttpRequest();req1.open("GET","https://static.iqiyi.com/js/common/f6a3054843de4645b34d205a9f377d25.js",false);req1.onload=function(){var script=document.createElement("script");script.text=req1.responseText;document.getElementsByTagName("head")[0].appendChild(script)};req1.send(null)}var fs=item.fs;var content="#EXTM3U\n";fs.forEach(function(fs_i,fs_index){var url=fs_i.l;var prefix="https://data.video.iqiyi.com/videos";var api=prefix+url;try{var t=playerObject._player.package.engine.adproxy.engine.movieinfo.current.boss.data.t;api=prefix+url+"&cross-domain=1&t="+t+"&QY00001="+/qd_uid=(\d+)/g.exec(url)[1]+"&ib=4&ptime=0&ibt="+cmd5x(t+/\/(\w{10,})/g.exec(url)[1])}catch(err){console.error(err)}var req=new XMLHttpRequest();req.overrideMimeType("application/json");req.open("GET",api,false);req.onload=function(){var jsonResponse=JSON.parse(req.responseText);content+="#EXTINF:0\n"+jsonResponse["l"]+"\n"};req.send(null)});content+="#EXT-X-ENDLIST";m3u8Content=content}else{m3u8Content=item.m3u8}var blob=new Blob([m3u8Content],{type:"text/plain"});var url=URL.createObjectURL(blob);var title=(document.title.indexOf("-")!=-1?document.title.substring(0,document.title.indexOf("-")):document.title.replace(/\s/,""))+"_"+item.scrsz+"_"+(item.code==2?"H264":"H265")+"_"+document.getElementsByClassName("iqp-time-dur")[0].innerText.replace(/:/,".")+"_"+(item.vsize/1024/1024).toFixed(2)+"MB.m3u8";/*nilaoda*/var aLink=document.createElement("a");aLink.href=url;aLink.download=title;aLink.style.display="none";var event;if(window.MouseEvent){event=new MouseEvent("click")}else{event=document.createEvent("MouseEvents");event.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)}})}})}
```

### 腾讯视频
超链接：<a href="javascript:var a=prompt(PLAYER._DownloadMonitor.context.dataset.title,PLAYER._DownloadMonitor.context.dataset.ckc?PLAYER._DownloadMonitor.context.dataset.currentVideoUrl:PLAYER._DownloadMonitor.context.dataset.currentVideoUrl.replace(/:.*qq.com/g,&quot;://defaultts.tc.qq.com/defaultts.tc.qq.com&quot;));">腾讯视频</a>

```javascript
javascript:var a=prompt(PLAYER._DownloadMonitor.context.dataset.title,PLAYER._DownloadMonitor.context.dataset.ckc?PLAYER._DownloadMonitor.context.dataset.currentVideoUrl:PLAYER._DownloadMonitor.context.dataset.currentVideoUrl.replace(/:.*qq.com/g,"://defaultts.tc.qq.com/defaultts.tc.qq.com"));
```

### 优酷视频
超链接：<a href="javascript:var url;var size=0;Array.from(videoPlayer.getData()._playlistData.stream).forEach(function(element,index,array){if(element.audio_lang==videoPlayer.getConfig().language&&element.size>size){url=element.m3u8_url;size=element.size}});/*nilaoda*/var a=prompt(videoPlayer.getData()._videoData.title+&quot;_&quot;+videoPlayer.getConfig().language+&quot;_&quot;+(size/1024/1024).toFixed(2)+&quot;MB&quot;,url);">优酷视频</a>

```javascript
javascript:var url;var size=0;Array.from(videoPlayer.getData()._playlistData.stream).forEach(function(element,index,array){if(element.audio_lang==videoPlayer.getConfig().language&&element.size>size){url=element.m3u8_url;size=element.size}});/*nilaoda*/var a=prompt(videoPlayer.getData()._videoData.title+"_"+videoPlayer.getConfig().language+"_"+(size/1024/1024).toFixed(2)+"MB",url);
```

### 搜狐视频
超链接：<a href="javascript:var dur=document.getElementsByClassName(&quot;x-time-duration&quot;)[0].innerText;var ti=document.getElementById(&quot;vinfobox&quot;).getElementsByTagName(&quot;h2&quot;)[0].innerText;var dfn=document.getElementsByClassName(&quot;x-resolution-btn&quot;)[0].innerText;var content=&quot;#EXTM3U\n&quot;;_player.p2pkernel.dispatchUrlArr.forEach(function(item,index){var url=item[&quot;0&quot;];$.ajaxSettings.async=false;$.get(url,function(data,status){content+=&quot;#EXTINF:0\n&quot;+data[&quot;servers&quot;][0][&quot;url&quot;]+&quot;\n&quot;});$.ajaxSettings.async=true});content+=&quot;#EXT-X-ENDLIST&quot;;var blob=new Blob([content],{type:&quot;text/plain&quot;});var url=URL.createObjectURL(blob);var aLink=document.createElement(&quot;a&quot;);aLink.href=url;aLink.download=ti+&quot;_&quot;+dfn+&quot;_&quot;+dur.replace(/:/,&quot;.&quot;)+&quot;.m3u8&quot;;/*nilaoda*/aLink.style.display=&quot;none&quot;;var event;if(window.MouseEvent){event=new MouseEvent(&quot;click&quot;)}else{event=document.createEvent(&quot;MouseEvents&quot;);event.initMouseEvent(&quot;click&quot;,true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)">搜狐视频</a>

```javascript
javascript:var dur=document.getElementsByClassName("x-time-duration")[0].innerText;var ti=document.getElementById("vinfobox").getElementsByTagName("h2")[0].innerText;var dfn=document.getElementsByClassName("x-resolution-btn")[0].innerText;var content="#EXTM3U\n";_player.p2pkernel.dispatchUrlArr.forEach(function(item,index){var url=item["0"];$.ajaxSettings.async=false;$.get(url,function(data,status){content+="#EXTINF:0\n"+data["servers"][0]["url"]+"\n"});$.ajaxSettings.async=true});content+="#EXT-X-ENDLIST";var blob=new Blob([content],{type:"text/plain"});var url=URL.createObjectURL(blob);var aLink=document.createElement("a");aLink.href=url;aLink.download=ti+"_"+dfn+"_"+dur.replace(/:/,".")+".m3u8";/*nilaoda*/aLink.style.display="none";var event;if(window.MouseEvent){event=new MouseEvent("click")}else{event=document.createEvent("MouseEvents");event.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null)}aLink.dispatchEvent(event)
```

### M3U8下载器
[点我传送](https://jackxjz.vercel.app/2020/08/26/blog21)